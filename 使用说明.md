# 桌面待办事项小工具 - 使用说明

## 🚀 快速启动

**双击桌面上的"桌面待办"快捷方式即可启动**

## ✨ 功能特性

### 基础功能
- ✅ **添加任务**：在顶部输入框输入内容，按回车或点击"添加"按钮
- ✅ **完成任务**：点击任务前的复选框标记完成/未完成
- ✅ **删除任务**：点击任务右侧的"✕"按钮
- ✅ **编辑任务**：双击任务文本进入编辑模式
  - 支持多行文本
  - 自动换行显示
  - 快捷键：Ctrl+Enter 保存，Esc 取消
- ✅ **超链接支持**：任务描述中的网址自动识别为超链接
  - 显示为蓝色下划线
  - 点击直接用默认浏览器打开完整URL
  - 支持 http:// 和 https:// 链接

### 任务排序
- ✅ **拖拽排序**：按住任务左侧的"☰"图标上下拖动调整顺序
- ✅ **按钮排序**：点击任务右侧的"↑↓"按钮调整顺序
- ✅ **分组内排序**：排序仅在当前分组内生效

### 分组管理
- ✅ **创建分组**：点击"➕"按钮新建分组
- ✅ **重命名分组**：点击"✏️"按钮重命名当前分组
- ✅ **删除分组**：点击"🗑️"按钮删除当前分组
  - 删除分组时，该分组的任务会自动移到"默认分组"
  - "默认分组"不能删除或重命名
- ✅ **切换分组**：下拉选择不同分组查看对应任务
- ✅ **独立统计**：每个分组独立显示任务统计

### 高级功能
- ✅ **窗口置顶**：勾选"窗口置顶"让应用始终显示在最前面
- ✅ **显示/隐藏已完成**：勾选"显示已完成"切换已完成任务的显示状态
- ✅ **智能侧边隐藏**：
  - **拖拽到屏幕右侧边缘**自动开启侧边隐藏
  - **拖拽离开边缘**自动关闭侧边隐藏
  - 也可手动勾选"侧边隐藏"开关
  - 鼠标在窗口内时保持展开
  - 鼠标离开后自动隐藏为细边条
  - 鼠标靠近右侧边缘时自动展开
- ✅ **系统托盘支持**：关闭窗口时可选择隐藏到系统托盘
  - 可勾选"记住我的选择",并回车，下次自动执行
  - 点击托盘图标（左键或右键）即可显示窗口
- ✅ **不占用任务栏**：应用不会在任务栏显示图标，保持桌面整洁
- ✅ **数据持久化**：所有任务、分组和设置自动保存

### 📊 统计信息
底部实时显示当前分组的：
- 总计任务数
- 待完成任务数
- 已完成任务数

## 🎯 使用技巧

### 任务排序
**拖拽排序（推荐）**
1. 鼠标按住任务左侧的"☰"图标
2. 上下拖动到目标位置
3. 松开鼠标完成排序

**按钮排序**
1. 点击任务右侧的"↑"按钮向上移动
2. 点击任务右侧的"↓"按钮向下移动

### 分组管理
**创建分组**
1. 点击分组下拉框右侧的"➕"按钮
2. 输入分组名称
3. 点击确定，自动切换到新分组

**使用分组**
1. 在分组下拉框选择要查看的分组
2. 添加的任务会自动归入当前分组
3. 每个分组的任务独立显示和统计

**管理分组**
- 重命名：点击"✏️"按钮修改当前分组名称
- 删除：点击"🗑️"按钮删除当前分组（任务会移到默认分组）
- 默认分组不能删除或重命名

### 超链接使用
**添加超链接**
1. 在任务描述中直接输入网址
2. 支持格式：`http://example.com` 或 `https://example.com`
3. 保存后网址会自动显示为蓝色下划线

**打开链接**
- 直接点击任务中的蓝色超链接
- 自动用默认浏览器打开完整URL（即使显示时被截断）

**示例**
```
查看文档 https://github.com/example/repo
学习教程 http://www.example.com/tutorial
飞书文档 https://c4ojsj1ybv.feishu.cn/docx/ZFsadWKOaoCGPDxWDWZcMj6...
```

### 智能侧边隐藏
**方式1：拖拽自动开启**
1. 拖动窗口标题栏
2. 拖到屏幕右侧边缘（30像素内）
3. 松开鼠标，自动开启侧边隐藏模式
4. 拖离边缘（超过100像素）自动关闭

**方式2：手动开关**
1. 勾选"侧边隐藏"复选框
2. 窗口自动移到屏幕右侧
3. 取消勾选即可关闭

**使用体验**：
- 鼠标在窗口内时保持展开
- 鼠标离开后自动收起为细边条
- 鼠标移到屏幕右边缘即可展开
- 适合作为桌面侧边栏长期使用

### 系统托盘模式
1. 点击窗口关闭按钮（X）
2. 选择"隐藏到系统托盘"或"直接退出程序"
3. 可勾选"记住我的选择"，下次不再询问
4. 隐藏到托盘后：
   - **直接点击托盘图标**（左键或右键）显示窗口
   - 右键托盘图标选择"退出"完全关闭程序

### 推荐使用方式
- **最佳体验**：拖到屏幕右侧边缘 + 开启"窗口置顶" + 使用分组管理
- **快速查看**：鼠标移到屏幕右边缘即可查看待办
- **拖拽排序**：按住"☰"图标拖动调整任务顺序
- **临时隐藏**：关闭时选择"隐藏到托盘"，点击托盘图标恢复
- **桌面整洁**：应用不占用任务栏，完全不影响其他工作

## 📁 文件说明

- `desktop_todo.py` - 主程序文件
- `todo_data.json` - 任务数据文件（自动生成）
- `todo_config.json` - 配置文件（自动生成，包含分组和设置）
- `使用说明.md` - 本说明文档

## ❓ 常见问题

### Q: 如何拖拽排序任务？
A: 按住任务左侧的"☰"图标，上下拖动到目标位置后松开鼠标。

### Q: 拖拽排序没反应？
A: 确保按住的是"☰"图标，拖动距离超过50像素才会触发位置交换。

### Q: 如何使用分组功能？
A: 点击"➕"创建新分组，在下拉框切换分组，每个分组的任务独立管理。

### Q: 删除分组后任务会丢失吗？
A: 不会，删除分组时任务会自动移到"默认分组"。

### Q: 如何在任务中添加链接？
A: 直接输入完整的网址（如 https://example.com），保存后会自动识别为超链接。

### Q: 超链接被截断了怎么办？
A: 即使显示时被截断为"..."，点击时仍会打开完整的URL，不影响使用。

### Q: 如何快速开启侧边隐藏？
A: 直接拖动窗口到屏幕右侧边缘即可自动开启。

### Q: 为什么任务栏没有图标？
A: 这是设计特性，应用不占用任务栏，保持桌面整洁。可通过托盘图标或鼠标移到右侧边缘来访问。

### Q: 数据保存在哪里？
A: 数据保存在程序所在目录的 `todo_data.json` 文件中。

### Q: 如何备份数据？
A: 复制 `todo_data.json` 和 `todo_config.json` 文件即可备份所有数据和设置。

## 🔧 技术信息

- **开发语言**：Python 3
- **GUI框架**：Tkinter
- **系统托盘**：pystray + Pillow
- **数据存储**：JSON
- **系统要求**：Windows 7 及以上

## 📝 更新日志

### v1.7 (当前版本)
- ✅ 拖拽排序功能（按住"☰"图标拖动）
- ✅ 修复超链接被截断问题（点击打开完整URL）
- ✅ 修复分组任务关联问题
- ✅ 优化侧边栏隐藏逻辑（保持窗口大小）
- ✅ 启动时默认正常显示（不自动隐藏到侧边）

### v1.6
- ✅ 分组管理功能（创建、重命名、删除分组）
- ✅ 任务超链接支持（自动识别并可点击打开）
- ✅ 每个分组独立显示和统计
- ✅ 任务排序仅在当前分组内生效

### v1.5
- ✅ 拖拽到屏幕右侧边缘自动开启侧边隐藏
- ✅ 拖拽离开边缘自动关闭侧边隐藏
- ✅ 应用不再占用任务栏空间

### v1.4
- ✅ 优化关闭对话框，支持"记住我的选择"
- ✅ 修复托盘图标点击问题

### v1.3
- ✅ 侧边自动隐藏功能
- ✅ 系统托盘支持

### v1.2
- ✅ 显示/隐藏已完成任务
- ✅ 双击编辑
- ✅ 多行文本支持

### v1.1
- ✅ 任务编辑功能
- ✅ 任务手动排序

### v1.0
- ✅ 基础的任务添加、完成、删除功能
- ✅ 窗口置顶功能
- ✅ 数据持久化

---

**💡 使用提示**：
- 🎯 **分组管理**：用分组整理不同类型的任务（工作、学习、生活等）
- 🖱️ **拖拽排序**：按住"☰"图标拖动，快速调整任务顺序
- 🔗 **超链接**：在任务中添加参考链接，点击即可打开完整URL
- 📌 **侧边栏**：拖到屏幕右侧边缘，作为桌面侧边栏使用
- 💾 **自动保存**：所有操作自动保存，无需担心数据丢失
